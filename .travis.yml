dist: trusty
sudo: required
language: java
jdk:
- openjdk8
- oraclejdk8
before_install:
- sudo apt-get update
- sudo apt-get install -y texlive texlive-base texlive-latex-extra texlive-fonts-extra
  python-virtualenv librsvg2-bin
- wget https://github.com/jgm/pandoc/releases/download/2.5/pandoc-2.5-linux.tar.gz
- tar -xzvf pandoc-2.5-linux.tar.gz
- rm pandoc-2.5-linux.tar.gz
- sudo mv pandoc-2.5 /opt
- sudo chmod +x /opt/pandoc-2.5/bin/pandoc
- sudo ln -s /opt/pandoc-2.5/bin/pandoc /usr/local/bin/pandoc
- sudo ln -s /opt/pandoc-2.5/bin/pandoc-citeproc /usr/local/bin/pandoc-citeproc
script:
- cd spec-publisher
- mvn clean package
- java -jar target/mets-profile-proc.jar ../profile/E-ARK-SIP.xml
- cd ..
- bash create-site.sh
- bash create-pdf.sh
- bundle install
- bundle exec jekyll build -s ./docs -d ./_site
deploy:
  provider: pages
  skip_cleanup: true
  github_token: "$GH_TOKEN"
  keep_history: true
  local_dir: docs
  fqdn: earkcsip.dilcis.eu
  on:
    branch: master
env:
  global:
  - NOKOGIRI_USE_SYSTEM_LIBRARIES=true
  - secure: BjL+RmPgmCs4FkKlHCA2W2EkMdqRdQl7GF4hT2oeyUgvzGx5jJ5mU1E5ffKFj/xYGZiMqdW7kkXaNDYiJ0ouzsi8+WOEi7TcFkFBVdMkDkwoIJp5iBhSPqMe1/+0umJr6nUggwPAAgf2z3jbQDOlB4wj2Pm71hTwZqceb2Ifhb3p1KDfb8b61vpoYsirqd2ANn3M1xMViDyjHBwEhPPFO/x5CU66g+RklczwIanvvx/W4RVd/bigsrlSgcjDtXDZj+kbLvwraUJxrnLFpq9cHimSdrmGw1tCWtSlfKWVXM4FLwCZnaKXQgsABqAaJkwCBepjQOC3zPYBxl7rzWg10GKyZa4DB5RjSnw96YCHjlMTLoWFQ9V0EJZb/dUDa6pG3aElNYGBIsPrrlUXKOa1ID0iSn0LxUxLYTGo8ikan/LH2zaXtXUaIK5kUVRo8f9JqgY9+iS+6IkTfSxwVIqkr7YN3f+ldCIqKaT6CynaYzu32v7BMQBPHZlDRiSiWyyG74O2uLBh3FyGZk2FZWuK8SAaHvntKrLo3rlsQYEl32UILzlpGYQvrQGCQzbqzW4B4BzsUkp9YUUPqWTXfjpm0fhkCnhbwPe3Bwho26hFptUKg9SUmfooqZ4rP0UGLtI5al2u5YFI+5vXV3j9BqbEAFBzcUew2Bdt9z1OpPDyh9o=
